<div class="container" *ngIf="roomDetails; else isLoading">

    <div class="grid grid-cols-12 items-center">
    <div class="col-span-12">
      <p><a routerLink="/master" class="text-gray-400">{{'global.home'|translate}}</a><span class="text-gray-400 mx-2">/</span><a routerLink="/master/details/{{this.roomid}}" class="text-gray-400">{{'roomDetails.details'|translate}}</a><span class="text-gray-400 mx-2">/</span><a routerLink="/master/details/{{this.roomid}}">{{ roomDetails.roomNumber || 'Details'}}</a></p>
    </div>
    <div class="col-span-12 text-center">
        <h1 class="room-title"> {{ roomDetails.roomNumber }}</h1>
        <span class="text-gray-400">{{'roomDetails.capacity'|translate}} {{ roomDetails.capacity}} {{'roomDetails.people'|translate}}</span>
    </div>
  </div>

  <!-- Room Images Section -->
   <owl-carousel-o *ngIf="(roomDetails?.images?.length ?? 0) > 0; else defaultImage" [options]="customOptions" class="owl">
  <ng-container *ngFor="let slide of roomDetails?.images; let i = index">
    <ng-template carouselSlide [id]="i.toString()">
      <img [src]="slide" alt="room"  class="block w-full h-64 object-cover rounded-lg"/>
    </ng-template>
  </ng-container>

</owl-carousel-o>
  <ng-template #defaultImage>
    <ng-template carouselSlide>
      <img [src]="dimage1" alt="default room" class="block w-full h-64 object-cover rounded-lg"/>
    </ng-template>
  </ng-template>
  <!-- No Images Template -->
  <!-- <ng-template #noImages>
    <div class="no-images">
      <p>No images available for this room.</p>
    </div>
  </ng-template> -->

  <!-- Room Content -->
  <div class="room-content">
    <!-- Description Section -->
    <div class="room-description">

      <div class="layout-a">
        <p>{{'roomDetails.Details1'|translate}}</p>
      </div>

      <div class="layout-b">
     <p>{{'roomDetails.Details2'|translate}}</p>
      </div>

      <div class="layout-c">
       <p>{{'roomDetails.Details3'|translate}}</p>
      </div>

      <!-- Icons Grid -->
      <div class="iconImg">
        <div class="icon-grid">
          <div class="icon-item" *ngFor="let icon of icons">
            <div class="icon-image">
              <img [src]="icon.img" [alt]="icon.label" />
            </div>
            <p class="icon-number"> {{ icon.number }} <span>{{ language == 'en'? icon.label  : icon.arlable}}</span></p>
          </div>
        </div>
      </div>


    </div>

    <!-- Booking Card -->
    <div class="booking-card">
      <!-- Upper Part -->
      <div class="card-upper">
        <h3 class="card-title">{{'roomDetails.startBooking'|translate}}</h3>

        <!-- Price Section -->
        <div class="price-section">
          <span class="price">${{ roomDetails.price }}</span>
          <span class="per-night">{{'roomDetails.perNight'|translate}}</span>
        </div>

        <!-- Discount -->
        <div class="discount" *ngIf="roomDetails.discount !== null && roomDetails.discount !== undefined">
          {{'roomDetails.discount'|translate}} {{ roomDetails.discount }}%
        </div>

        <!-- Date Section -->
        <div class="date-section">
          <h4 class="section-title">{{'roomDetails.pickDate'|translate}}</h4>
           <form [formGroup]="CreateBookingForm">
             <mat-form-field class="small-w">
                    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-date-range-input  [rangePicker]="picker">
                        <input matStartDate formControlName="startDate"  placeholder="{{'global.startDate' | translate}}">
                        <input matEndDate formControlName="endDate"  placeholder="{{'global.endDate' | translate}}">
                    </mat-date-range-input>
                    <mat-date-range-picker #picker></mat-date-range-picker>
                    </mat-form-field>
           </form>
        </div>
      </div>

      <!-- Lower Part -->
      <div class="card-lower">
        <p class="payment-note">
          {{'roomDetails.youWillPay'|translate}} <strong>${{ getTotalCost() }} USD</strong> {{'roomDetails.per'|translate}}
          <strong>{{ roomDetails.capacity }} {{'roomDetails.Person'|translate}}</strong>
        </p>

        <button class="book-button" (click)="createBooking(roomDetails)">{{'roomDetails.ContinueBook'|translate}}</button>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="grid grid-cols-12 gap-4">
    <div class="col-span-12 md:col-span-6">

      <!-- Rating Section -->
      <div class="rating-section">
        <label class="section-title">{{'roomDetails.Rate'|translate}}</label>
        <div class="stars">
          <i
            class="fa-star"
            *ngFor="let star of stars; let i = index"
            [ngClass]="i < rating ? 'fas filled' : 'far'"
            (click)="setRating(i + 1)">
          </i>
        </div>
      </div>

      <!-- Single Message Section -->
      <div class="message-section">
        <label class="section-title">{{'roomDetails.Message'|translate}}</label>
        <textarea
          [(ngModel)]="message"
          placeholder="{{'roomDetails.WriteReviewPlaceholder'|translate}}"
          class="message-input">
        </textarea>

        <!-- Submit Button -->
        <div class="rate-button-wrapper">
          <button class="rate-button" (click)="submitRating()">{{'roomDetails.Rate'|translate}}</button>
        </div>
      </div>
    </div>
    <div class="col-span-12 md:col-span-6">

      <!-- Rating Section -->
      <div class="rating-section">
        <label class="section-title">{{'roomDetails.AddYourComment'|translate}}</label>
        <div class="stars" style="visibility: hidden;">
          <i
            class="fa-star"
            *ngFor="let star of stars; let i = index"
            [ngClass]="i < rating ? 'fas filled' : 'far'"
            (click)="setRating(i + 1)">
          </i>
        </div>
      </div>

      <!-- Single Message Section -->
      <div class="message-section">
        <label class="section-title">{{'roomDetails.Message'|translate}}</label>
        <textarea
          [(ngModel)]="comment"
          placeholder="{{'roomDetails.WriteCommentPlaceholder'|translate}}"
          class="message-input">
        </textarea>

        <!-- Submit Button -->
        <div class="rate-button-wrapper">
          <button class="rate-button" (click)="submitComment()">{{'roomDetails.Send'|translate}}</button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Loader -->
<ng-template #isLoading>
  <div class="loading-state">
    <p>Loading room details...</p>
  </div>
</ng-template>
